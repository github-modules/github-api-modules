{"name":"cwrcgit","version":"1.4.0","description":"Client for creating and updating CWRC XML documents in GitHub through the GitHub API.","main":"src/index.js","scripts":{"commit":"git-cz","check-coverage":"istanbul check-coverage --statements 100 --branches 100 --functions 100 --lines 100","report-coverage":"cat ./coverage/lcov.info | codecov","test":"mocha spec -w","test:single":"istanbul cover -x *.test.js _mocha -- -R spec spec","semantic-release":"semantic-release pre && npm publish && semantic-release post"},"repository":"https://github.com/jchartrand/CWRC-Git","keywords":["xml","rdf","editor","github"],"license":"GPL-2.0","homepage":"https://github.com/jchartrand/CWRC-Git#readme","dependencies":{"github":"8.1.1","xmldom":"0.1.27"},"devDependencies":{"chai":"3.5.0","codecov.io":"0.1.6","commitizen":"2.9.5","cz-conventional-changelog":"1.2.0","ghooks":"2.0.0","istanbul":"0.4.5","mocha":"3.2.0","nock":"9.0.2","semantic-release":"^6.3.2"},"config":{"ghooks":{"pre-commit":"npm run test:single && npm run check-coverage"},"commitizen":{"path":"node_modules/cz-conventional-changelog"}},"gitHead":"65c8de1b30a146452e4b10622232bc6aebe49613","versions":[{"number":"1.0.0","date":"2017-02-02T02:53:09.740Z"},{"number":"1.1.0","date":"2017-03-14T04:25:59.719Z"},{"number":"1.1.1","date":"2017-03-14T23:29:13.906Z"},{"number":"1.2.0","date":"2017-03-30T23:10:17.147Z"},{"number":"1.3.0","date":"2017-04-02T22:43:35.534Z"},{"number":"1.3.1","date":"2017-04-18T04:39:24.940Z"},{"number":"1.3.2","date":"2017-04-20T00:50:56.698Z"},{"number":"1.4.0","date":"2017-04-20T03:25:07.007Z"}],"readme":"![Picture](http://www.cwrc.ca/wp-content/uploads/2010/12/CWRC_Dec-2-10_smaller.png)\n\n# CWRC-Git\n\n[![Travis](https://img.shields.io/travis/jchartrand/CWRC-Git.svg)](https://travis-ci.org/jchartrand/CWRC-Git)\n[![Codecov](https://img.shields.io/codecov/c/github/jchartrand/CWRC-Git.svg)](https://codecov.io/gh/jchartrand/CWRC-Git)\n[![version](https://img.shields.io/npm/v/cwrcgit.svg)](http://npm.im/cwrcgit)\n[![downloads](https://img.shields.io/npm/dm/cwrcgit.svg)](http://npm-stat.com/charts.html?package=cwrcgit&from=2015-08-01)\n[![GPL-2.0](https://img.shields.io/npm/l/cwrcgit.svg)](http://opensource.org/licenses/GPL-2.0)\n[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)\n[![experimental](http://badges.github.io/stability-badges/dist/experimental.svg)](http://github.com/badges/stability-badges)\n\n1. [Overview](#overview)\n1. [Demo](#demo)\n1. [Installation](#installation)\n1. [Use](#use)\n1. [API](#api)\n1. [Development](#development)\n1. [Contributing](#contributing)\n1. [FAQ](#faq)\n1. [License](#license)\n\n### Overview\n\nNPM package for searching GitHub, and for creating and updating CWRC XML documents in GitHub, all through the GitHub API.  Used by the [CWRC-GitServer](https://github.com/cwrc/CWRC-GitServer), whose web API is in turn used by the [CWRC-GitWriter](https://github.com/cwrc/CWRC-GitWriter).\n\n### Demo \n\nThe [CWRC GitHub Sandbox](http://208.75.74.217) is a running instance of [CWRC-GitWriter](https://github.com/cwrc/CWRC-GitWriter), which used the NPM package published from this repository along with the code in [CWRC-WriterBase](https://github.com/cwrc/CWRC-WriterBase), [CWRC-GitServer](https://github.com/cwrc/CWRC-GitServer), [CWRC-GitDelegator](https://github.com/cwrc/CWRC-GitServer), and [CWRC-GitServerClient](https://github.com/cwrc/CWRC-GitServerClient). The same code is easily (for someone with modest development experience) installed on any server to run your own instance.  If you are looking to put together your own CWRC-Writer, [CWRC-GitWriter](https://github.com/cwrc/CWRC-GitWriter) is probably a good place to start.\n\n### Installation\n\n`npm install cwrcgit`   \n\nTo simultaneously register as a dependency in your package.json:\n\n`npm install cwrcgit --save`   \n\nor in shortcut form:\n\n`npm i -S cwrcgit`\n\n### Use\n\nOne example:\n\nvar cwrcGit = require('cwrcgit');\ncwrcGit.authenticate(gitHubOAuthToken);\nvar repos = cwrcGit.getReposForAuthenticatedUser();\n\nThe spec directory contains specifications (tests) that can help better understand the API. Also see [CWRC-GitServer](https://github.com/cwrc/CWRC-GitServer) which fully uses the API.\n\n### API\n\nThe methods exposed (API) by this package are:\n\n```\nauthenticate(gitHubOAuthToken) - must first be called before any of the other methods\n\ngetDetailsForAuthenticatedUser()\n\ngetReposForAuthenticatedUser()\n\ngetReposForUser({username:gitHubUserNameGoesHere})\n\ncreateRepoForDoc({\n\t\trepo: the repository name,\n\t    isPrivate: true/false, \n\t    doc:the XML document itself, \n\t    description: description of the repo/doc,\n\t    annotations: bundle of oa annotations as single string of rdf,\n\t    versionTimestamp: timestamp which acts as the version number\n    })\n\nsaveDoc({\n\t\towner: github username,\n\t    repo: repository name,\n\t    doc:the XML document itself, \n\t    baseTreeSHA: baseTreeSHA, \n\t    parentCommitSHA: parentCommitSHA,\n\t    annotations: bundle of oa annotations as single string of rdf,\n\t    versionTimestamp: timestamp which acts as the version number\n    })\n\ngetDoc({\n\t\towner: github username, \n\t\trepo: github repository name\n\t})\n\ngetAnnotations({\n\t\towner: github username, \n\t\trepo: github repository name\n\t})\n\ngetTemplates({\n\t\towner: github username, \n\t\trepo: github repository name,\n\t\tref: the branch\n\t\tpath: path to template files\n\t})\n\ngetTemplate(download_url_from_getTemplates_call)\n\nsearch({\n\t\tuser: github username (optional)\n\t\ttopics: array of github topics (optional),\n\t\tquery: query terms (required)\n\t})\n\n```\n\n\n\n### Development\n\n* Fork or clone (depending on your role in the project) the repo to your local machine.\n\n* `npm install` to install the node.js dependencies \n\t\n\tNOTE:  we use `npm set save-exact true` to save dependencies as exact version numbers so NPM should install exact versions when you run install\n\n* The config.js file specifies several passwords and tokens.  You'll have to set these values appropriately in your cloned repo.  To prevent git from noticing that you've changed the file (so that you don't inadvertently commit the file and push it to the public repo thereby exposing the passwords) use:\n\n`git update-index --skip-worktree config.js`\n\n* write a test (or two)for your new functionality (in 'spec' directory)\n\n* `npm test` to start mocha and automatically rerun the tests whenever you change a file\n\n* change some stuff to satisfy new test\n\n\n### Commit to Github / Build in Travis / Release to NPM\n\nIf you are working within a cloned copy, do the following to setup automatic semantic release through continuous integration using semantic-release (which in turn uses Travis) and commitizen.  Otherwise, if you are working from a fork, then submit a pull-request.\n\nMake sure you've got NPM configured to publish to the NPM registry:\n\n```\nnpm set init.author.name \"James Chartrand\"\nnpm set init.author.email \"jc.chartrand@gmail.com\"\nnpm set init.author.url \"http://openskysolutions.ca\"\nnpm login  (answer prompts approriately)\n```\nand install semantic-release-cli globally:\n\n`npm install -g semantic-release-cli`\n\nIf necessary (it should already have been done, but maybe the NPM author information has changed for example) configure semantic release:\n\n`semantic-release-cli setup`\n\nwhich will ask you a series of questions, which at the time of writing this were:\n\n```\nsemantic-release-cli setup\n? What is your npm registry? https://registry.npmjs.org/\n? What is your npm username? jchartrand\n? What is your npm password? *******\n? What is your GitHub username? jchartrand\n? What is your GitHub password? ********\n? What CI are you using? Travis CI\n```\n\nSemantic-release sets up a Travis build (on the Travis web site in the Travis account associated with the given Github username) and a trigger in GitHub to run the Travis build on the Travis site whenever you push a change to the GitHub repo.  The Travis build will also deploy a new version to the NPM registry if the commited change is either a new feature or a breaking change.\n\nTo submit a commit, stage your changes (e.g., git add -A) then instead of using git's commit command, instead use `npm run commit` which uses commitizen to create commits that are structured to adhere to the semantic-release conventions (which are the same as those used by Google: https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit )\n\nThe NPM `ghooks` package is used to add two pre-commit git hooks that will check that all mocha tests pass and that code coverage is 100% (as caluclated by istanbul) before allowing a commit to proceed.  The hooks are set in package.json:\n\n```\n\"config\": {\n    \"ghooks\": {\n      \"pre-commit\": \"npm run test:single && npm run check-coverage\"\n    }\n  }\n```\n\nAfter the commit has succeeded then `git push` it all up to github, which will in turn trigger the Travis build.  The Travis build is also set to confirm that all tests pass and that code coverage is 100%.  This is set in the `.travis.yml` file:\n\n```\nscript:\n  - npm run test:single\n  - npm run check-coverage\n```\n\nOf course, if the githooks that check tests and code coverage themselves passed, then the Travis check for tests and code coverage should also be fine.\n\nResults of the travis build are here:\n\n`https://travis-ci.org/jchartrand/CWRC-Git` \n\nThe Travis build also publishes the code coverage statistics to codecov.io where the coverage can be viewed:\n\n`https://codecov.io/gh/jchartrand/CWRC-Git/`\n\n codecov.io also provides us with the code coverage badge at the top of this README.\n\nFinally the Travis build publishes a new version (if the commit was designated as a new feature or breaking change) to NPM:\n\nhttps://www.npmjs.com/package/cwrcgit\n\nTesting uses mocha and chai.  Tests are in the `spec` directory. \n\nThis module makes http calls to the GitHub API, including calls to create new repositories.  Rather than make those calls for every test, [nock](https://github.com/node-nock/nock) instead mocks the calls to GitHub (intercepts the calls and instead returns pre-recorded data).\n\n\n### Contributing\n\nPlease contact us if you'd like to contribute.  Standard pull requests, including tests, are expected.\n\n### FAQ\n\nWho would use this?\n\nAnyone wanting to use the CWRC-Writer to author XML documents with RDF annotations, and save those documents to GitHub.\n\n### License\n\n[GNU GPL V2](LICENSE)","created":"2017-02-02T02:53:09.740Z","modified":"2017-04-20T03:25:07.007Z","lastPublisher":{"name":"jchartrand","email":"jc.chartrand@gmail.com"},"owners":[{"name":"jchartrand","email":"jc.chartrand@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"cwrcgit","_nodeVersion":"7.9.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/cwrcgit-1.4.0.tgz_1492658704889_0.9735634585376829"},"_npmUser":{"name":"jchartrand","email":"jc.chartrand@gmail.com"},"_npmVersion":"4.2.0","_rev":"8-732b18a281ccfea43d735f9879407bbb","_shasum":"4341940b99b9e3ea12c2008faa497eca1295ea5a","author":{"name":"“James","email":"“jc.chartrand@gmail.com”","url":"http://openskysolutions.ca"},"bugs":{"url":"https://github.com/jchartrand/CWRC-Git/issues"},"directories":{},"dist-tags":{"latest":"1.4.0"},"dist":{"shasum":"4341940b99b9e3ea12c2008faa497eca1295ea5a","tarball":"https://registry.npmjs.org/cwrcgit/-/cwrcgit-1.4.0.tgz"},"maintainers":[{"name":"jchartrand","email":"jc.chartrand@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-04-20T03:25:07.007Z","created":"2017-02-02T02:53:09.740Z","1.0.0":"2017-02-02T02:53:09.740Z","1.1.0":"2017-03-14T04:25:59.719Z","1.1.1":"2017-03-14T23:29:13.906Z","1.2.0":"2017-03-30T23:10:17.147Z","1.3.0":"2017-04-02T22:43:35.534Z","1.3.1":"2017-04-18T04:39:24.940Z","1.3.2":"2017-04-20T00:50:56.698Z","1.4.0":"2017-04-20T03:25:07.007Z"}}}
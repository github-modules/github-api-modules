{"name":"gpos","version":"0.2.0","description":"Github Pages search engine powered by Github code search API","main":"index.js","scripts":{"test":"bake -h"},"dependencies":{"bel":"^4.3.1"},"devDependencies":{"delegate":"^3.0.1","qs":"^6.2.0","yo-yo":"^1.2.1","babel-cli":"^6.9.0","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-regenerator":"^6.9.0","babel-preset-es2015":"^6.9.0","bake-cli":"^0.1.6","eslint":"^2.10.2","eslint-config-standard":"^5.3.1","eslint-plugin-promise":"^1.1.0","eslint-plugin-standard":"^1.3.2","mocha":"^2.5.2","standard-version":"^2.2.1","watchd":"^0.1.1","babel-plugin-react-transform":"^2.0.2","babel-preset-react":"^6.5.0","babelify":"^7.3.0","brfs":"^1.4.3","browserify":"^13.0.1","browserify-css":"^0.9.1","hyperxify":"^2.0.1","inliner":"^1.9.2","livereactload":"^2.2.3","micro-list":"^0.4.1","opn-cli":"^3.1.0","react":"^15.1.0","react-proxy":"^1.1.8","uglify-js":"^2.6.2","watchify":"^3.7.0","yo-yoify":"^1.0.4","zuul":"^3.10.1"},"browserify":{"transform":[["babelify",{"presets":["es2015","react"],"env":{"development":{"plugins":[["react-transform",{"transforms":[{"transform":"livereactload/babel-transform","imports":["react"]}]}]]}}}],"browserify-css","hyperxify","brfs"]},"browserify-css":{"autoInject":true},"repository":"https://github.com/mklabs/gh-pages-search","keywords":["github","search","api","opensearch"],"homepage":"https://github.com/mklabs/gh-pages-search#readme","license":"MIT","gitHead":"cd169b5a1e9fa60d2995a815c135b58a41f2180e","versions":[{"number":"0.2.0","date":"2016-06-03T03:10:46.749Z"}],"readme":"# gpos - Github Pages Open Search\r\n\r\n> Search engine on Github Pages using Github [code search\r\n> API](https://github.com/blog/1564-code-search-api) and\r\n> [opensearch](http://www.opensearch.org/Home)\r\n\r\nWritten for easy inclusion on any gh-pages repo / branch. This is just a little ([3.7k](#sizes))\r\nclient side lib that talks to `https://api.github.com/search/code?q=` API endpoint.\r\n\r\n1. Uses `fetch()` to query Github code search\r\n   ([polyfill](https://github.com/mklabs/polyfill))\r\n2. Pass the result to a template Function\r\n3. Builds a new DOM element using bel\r\n4. Appends the created element to the DOM.\r\n\r\n**Related**\r\n\r\n- https://github.com/blog/1564-code-search-api\r\n- https://developer.github.com/v3/search/\r\n- http://www.opensearch.org/Home\r\n- http://blog.unto.net/add-opensearch-to-your-site-in-five-minutes.html\r\n\r\n---\r\n\r\n**WIP** You can see a (buggy) version up at http://mkla.bz/search/?q=es6\r\n\r\nI got the basic feature working for my repo but still need to rewrite into a lib.\r\n\r\n- [x] option token (in url ?token=${token})\r\n- [ ] throttle input\r\n- [ ] handle errors (status != 200)\r\n- [x] default template / dom el creation. using bel or base-element.\r\n- [ ] options.link - transform filename into href for `<a />` tags.\r\n\r\n## Install\r\n\r\n**browserify**\r\n\r\n    npm install gpos -S\r\n\r\n**global**\r\n\r\n    <script defer src=\"https://cdn.rawgit.com/mklabs/gpos/master/dist/bundle.js\"></script>\r\n\r\nWill expose `gpos` as `window.gpos`.\r\n\r\n## Usage\r\n\r\nBasic query / display.\r\n\r\n```js\r\nlet view = gpos(template, {\r\n  repo: 'user/user.github.com',\r\n  language: 'markdown'\r\n});\r\n\r\nview.search(query).then((el) => {\r\n  document.body.appendChild(el);\r\n});\r\n```\r\n\r\nBind an input to query and update the dom on input change. Using [bel][] and\r\n[yoyo][] to update the results on input change.\r\n\r\n```js\r\nlet view = gpos(template, {\r\n  repo: 'user/user.github.com',\r\n  language: 'markdown'\r\n});\r\n\r\n// Get the reference to an input and a container DOM elements\r\nlet input = document.querySelector('.js-search');\r\nlet container = document.querySelector('.js-results');\r\n\r\n// Define the search function to call on input change (and page load)\r\nlet search = (value) => {\r\n  return view.search(value).then((el) => {\r\n    yo.update(container, el)\r\n  });\r\n};\r\n\r\n// Trigger a search on input change\r\ndelegate(document.body, '.js-search', 'input', (e) => {\r\n  search(input.value);\r\n}, false);\r\n\r\n// Get \"q\" querystring parameter and start the search from there\r\nlet query = qs.parse(location.search.replace(/^\\?/, '')).q || '';\r\nwindow.addEventListener('load', () => search(query));\r\n```\r\n\r\n### require('gpos')\r\n\r\nWill include CSS bundle and opensearch.xml template, with both [bel][] and\r\n[yo-yo][], bundle size is about 20k.\r\n\r\n```js\r\nvar gpos = require('gpos');\r\ngpos.css;         // gpos stylesheet\r\ngpos.opensearch;  // gpos stylesheet\r\ngpos.template;    // template factory using bel and ES6 tagged templates\r\n\r\ngpos('Search content').then((el) => document.body.appendChild(el))\r\n````\r\n\r\n## require('gpos/gpos')\r\n\r\nWill include only `gpos` library, without CSS, opensearch template or any additional libs.\r\n\r\nBundle size is about 4k.\r\n\r\n```js\r\nvar gpos = require('gpos/gpos');\r\ngpos('Search content').then((el) => document.body.appendChild(el))\r\n```\r\n\r\n## API\r\n\r\nGpos is a \"self described\" class. It just redefines the `toString()` to list\r\npublic methods and properties (with `this.help()`)\r\n\r\n```\r\nconsole.log(require('gpos') + '')\r\n\"var gpos = Gpos();\r\n\r\ngpos = new Gpos(template, options);\r\ngpos.search(query) => Promise => DOM element\r\ngpos.url(query, _ref) => String\r\ngpos.fetch(url) => Promise => JSON\r\ngpos.dom(res) => DOM element\r\ngpos.defaults => {\"language\":\"javascript\",\"repo\":\"mklabs/gpos\"}\r\ngpos.endpoint => https://api.github.com/search/code?q=\r\n```\r\n\r\n**options**\r\n\r\n- baseURL  - base url to build href upon\r\n- repo     - github repository in the form of `user/repo` (default: 'mklabs/gpos')\r\n- language - search in language files (default: 'markdown')\r\n- token    - add GitHub API token to the fetch URL ([read more](https://developer.github.com/v3/#authentication))\r\n\r\n## OpenSearch\r\n\r\n```js\r\nconsole.log(gpos.opeansearch);\r\n=> <xml version ...\r\n```\r\n\r\nReturns an OpenSearch xml template document, like\r\n[GitHub's](https://github.com/opensearch.xml). Copy and paste the content to an\r\n`opensearch.xml` file (or another name, but make sure to update the\r\nautodiscovery link below)\r\n\r\nOpeanSearch basically enables you to tell the browser to register a search\r\nengine for your website. Users can use it by tabbing or spacing after the root URL.\r\n\r\nYou need to add an [autodiscovery\r\nlink](http://www.opensearch.org/Specifications/OpenSearch/1.1#Autodiscovery),\r\non your github pages repo, preferably on all pages. Using jekyll, this is best\r\nachieved with adding it to your layouts or header includes.\r\n\r\n```html\r\n<link rel=\"search\" href=\"[URL of the file you just created]\"\r\n      type=\"application/opensearchdescription+xml\"\r\n      title=\"[Site name]\" />\r\n```\r\n\r\n*http://blog.unto.net/add-opensearch-to-your-site-in-five-minutes.html*\r\n\r\n[Example](http://mkla.bz/opensearch.xml)\r\n\r\n### Sizes\r\n\r\n- yo-yo - tiny (few bytes, includes bel)\r\n- qs - 10K\r\n- bel - 10K\r\n- path - 3K\r\n- delegate - 1K\r\n- browserify - 12k\r\n- gpos - 4k\r\n\r\nTotal: 36k\r\n\r\n```\r\n$ make stat\r\n-rwxrwxrwx 1 root root  20K Jun  3 04:38 bundle.js\r\n-rwxrwxrwx 1 root root  14K Jun  3 04:38 bundle.min.js\r\n-rwxrwxrwx 1 root root 4.5K Jun  3 04:38 gpos.js\r\n-rwxrwxrwx 1 root root 3.7K Jun  3 04:38 gpos.min.js\r\n```\r\n","created":"2016-06-03T03:10:46.749Z","modified":"2016-06-03T03:10:46.749Z","lastPublisher":{"name":"mklabs","email":"daniel.mickael@gmail.com"},"owners":[{"name":"mklabs","email":"daniel.mickael@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"gpos","_nodeVersion":"6.2.0","_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/gpos-0.2.0.tgz_1464923444040_0.7155496012419462"},"_npmUser":{"name":"mklabs","email":"daniel.mickael@gmail.com"},"_npmVersion":"3.9.5","_rev":"1-4c76a118826ada0d5232e1307dfc689d","_shasum":"beda3c5292ba6fceffe0f228459f9ff1e3308dbb","bugs":{"url":"https://github.com/mklabs/gh-pages-search/issues"},"directories":{},"dist-tags":{"latest":"0.2.0"},"dist":{"shasum":"beda3c5292ba6fceffe0f228459f9ff1e3308dbb","tarball":"http://registry.npmjs.org/gpos/-/gpos-0.2.0.tgz"},"maintainers":[{"name":"mklabs","email":"daniel.mickael@gmail.com"}],"readmeFilename":"readme.md","time":{"modified":"2016-06-03T03:10:46.749Z","created":"2016-06-03T03:10:46.749Z","0.2.0":"2016-06-03T03:10:46.749Z"}}}
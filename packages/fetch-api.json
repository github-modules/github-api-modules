{"name":"fetch-api","version":"0.0.2","description":"API wrapper for ES6's fetch method used with GitHub's fetch polyfill","main":"./lib/main.js","scripts":{"prepublish":"npm run compile && npm prune","lint":"eslint src","compile":"babel src --modules common --out-dir lib","watch":"babel src --watch --modules common --out-dir lib --source-maps","test":"npm run lint && NODE_ENV=test _mocha","coverage":"npm run-script analyze-coverage && npm run-script check-coverage","analyze-coverage":"NODE_ENV=test istanbul cover _mocha","check-coverage":"istanbul check-coverage","analyze-coverage-es6":"NODE_ENV=test ./node_modules/.bin/babel-node isparta cover _mocha"},"keywords":["fetch","github","polyfill","api","wrapper","rest","restful","glue","superagent","superagent-defaults"],"repository":"https://github.com/niftylettuce/node-react-native-fetch-api","license":"MIT","devDependencies":{"babel-cli":"^6.2.0","babel-core":"^6.2.1","babel-eslint":"^4.1.6","babel-preset-es2015":"^6.1.18","babel-preset-stage-0":"^6.1.18","bower":"^1.6.7","chai":"^3.4.1","check-chai":"0.0.1","cors":"^2.7.1","dirty-chai":"^1.2.2","eslint-plugin-react":"^3.10.0","express":"^4.13.3","isparta":"^4.0.0","istanbul":"^0.4.1","jsdomify":"^1.0.2","jshint":"^2.8.0","mocha":"^2.3.4","node-fetch":"^1.3.3","whatwg-fetch":"^0.10.1"},"dependencies":{"debug":"^2.2.0","istanbul":"^0.4.1","whatwg-fetch":"^0.10.1"},"gitHead":"d32cbfb1a3724bd2cc187e4da540f74946febd6e","homepage":"https://github.com/niftylettuce/node-react-native-fetch-api#readme","deprecated":"Please see https://github.com/glazedio/glazed instead","versions":[{"number":"0.0.1","date":"2015-11-26T22:05:09.648Z"},{"number":"0.0.2","date":"2015-11-27T23:15:36.258Z"}],"readme":"\n# Node React Native Fetch API\n\n[![Circle CI][circle-ci-image]][circle-ci-url]\n[![NPM version][npm-image]][npm-url]\n[![NPM downloads][npm-downloads]][npm-url]\n[![MIT License][license-image]][license-url]\n\n> **API wrapper for ES6's fetch method used with GitHub's fetch polyfill**\n\n> _Familiar with packages?  [Jump to Usage now](#usage)_\n\nNPM | Bower\\*\n--- | -------\n`npm install --save fetch-api` | `bower install --save fetch-api`\n\n<small>\\* You may need to `bower install --save es6-promise` to support [older browsers][older-browsers]</small>\n\n**What is this project about?**\n\nUse this package as a simple HTTP method wrapper for integrating your API in your [Node][nodejs] and [React Native][react-native] projects.  It's a better alternative, with less headaches (at least for me) for this use case than [superagent][superagent] and the default [fetch Network method][fetch-network-method].\n\nIt supports and is [tested](#Tests) for both client-side usage (e.g. with Bower, Browserify, or Webpack, with `whatwg-fetch`) and also server-side (with `node-fetch`).\n\n**Why not just use `superagent` or `fetch`?**\n\nSee [Background](#background) for more information.\n\n**Learning how to build an API with Node.js?**\n\nRead my article about [building Node.js API's with authentication][blog-article].\n\n\n## Index\n\n* [Usage](#usage)\n* [API](#api)\n* [Tests](#tests)\n* [Development](#development)\n* [Background](#background)\n* [Contributors](#contributors)\n* [Credits](#credits)\n* [License](#license)\n\n\n## Usage\n\n1. Install the package:\n    * NPM:\n\n        ```bash\n        npm install --save fetch-api\n        ```\n    * Bower:\n\n        ```bash\n        bower install --save fetch-api\n        ```\n\n2. Require it, set a base URI, and call some methods:\n\n    ```js\n    // require the module\n    import API from 'fetch-api';\n\n    // instantiate a new API instance\n    let api = new API({\n      baseURI: 'https://api.startup.com'\n    });\n\n    // log in to our API with a user/pass\n    api.post('/v1/login', (err, res, user) => {\n\n      // you'll probably want to handle this\n      // error better than just throwing it\n      if (err) throw err;\n\n      // set basic auth headers for all\n      // future API requests we make\n      api.auth(user.api_token);\n\n      // now let's post a message to our API\n      api.post(\n        '/v1/message',\n        { body: 'Hello' },\n        // if you wanted to pass JSON instead of plaintext:\n        // { body: { message: 'Hello' } }\n        (err, res, message) => {\n          // again obviously handle this error better\n          if (err) throw err;\n          // do something with the response\n          console.log('message', message);\n        }\n      );\n\n    });\n    ```\n\n\n## API\n\n```js\nimport API from 'fetch-api';\n```\n\n`API` is a function that optionally accepts an argument `options`, which is an object full of options for constructing your API instance.\n\n* `API` - accepts an `options` object, with the following accepted options:\n\n    * `baseURI` - the default URI to use as a prefix for all HTTP requests\n        * If your API server is running on `http://localhost:8080`, then use that as the value for this option\n        * If you use [React Native][react-native], then you most likely want to set `baseURI` as follows (e.g. making use of `__DEV__` global variable):\n\n        ```js\n        let api = new API({\n          baseURI: __DEV__\n            ? process.env.API_BASE_URI || 'http://localhost:8080'\n            : 'https://api.startup.com'\n        });\n        ```\n\n        * You could also set `API_BASE_URI` as an environment variable, and then set the value of this option to `process.env.API_BASE_URI` (e.g. `API_BASE_URI=http://localhost:8080 node app`)\n\n    * `headers` - an object containing default headers to send with every request\n    * `auth` - will call the `auth()` function below and set it as a default\n\nUpon being invoked, `API` returns an object with the following methods:\n\n* `api.auth([ user, pass ])` - helper function that sets BasicAuth headers, and it accepts `user` and `pass` arguments\n\n    * If you don't pass both `user` and `pass` arguments, then it removes any previously set BasicAuth headers from prior `auth()` calls\n    * If you pass only a `user`, then it will set `pass` to an empty string `''`)\n    * If you pass `:` then it will assume you are trying to set BasicAuth headers using your own `user:pass` string\n    * If you pass more than two keys, then it will throw an error (since we BasicAuth only consists of `user` and `pass` anyways)\n\n* All exposed HTTP methods require a `path` string and `callback` function arguments, and accept an optional `options` object:\n    * Accepted method arguments:\n        * `path` **required** - the path for the HTTP request (e.g. `/v1/login`, will be prefixed with the value of `baseURI` mentioned earlier)\n        * `options` _optional_ - an object containing options, such as header values, a request body, form data, or a querystring to send along with the request, here are a few examples:\n            * To set a custom header value of `X-Reply-To` on a `POST` request:\n\n                ```js\n                api.post('/messages', {\n                  headers: {\n                    'X-Reply-To': '7s9inuna748y4l1azchi'\n                  }\n                }, callback);\n                ```\n        * `callback` **required** - a callback function that gets called with the  arguments of `(err, res, body)`:\n            *  `err` - contains an error object (or `null`)\n            *  `res` - the response from server (it contains status code, etc)\n            *  `body` - the parsed JSON or text response (or `null`)\n    * List of available HTTP methods:\n        * `api.get(path, options, callback)` - GET\n        * `api.head(path, options, callback)` - HEAD (*does not currently work - see tests*)\n        * `api.post(path, options, callback)` - POST\n        * `api.put(path, options, callback)` - PUT\n        * `api.del(path, options, callback)` - DELETE\n        * `api.options(path, options, callback)` - OPTIONS (*does not currently work - see tests*)\n        * `api.patch(path, options, callback)` - PATCH\n\n\n## Tests\n\nThis package is tested to work with `whatwg-fetch` and `node-fetch`.\n\nThis means that it is compatible for both client-side and server-side usage.\n\n\n## Development\n\nWatch the `src` directory for changes with `npm run watch` and when you are done, run `npm test`.\n\n\n## Background\n\nFacebook [recommends][facebook-recommends] to use `superagent` with React Native, but it does not work properly, therefore I went with the next best solution, their `fetch` package.  After having several issues trying to use `fetch` and writing my own API wrapper for a project with it (and running into roadblocks along the way) -- I decided to publish this.\n\nHere were the issues I discovered/filed related to this:\n* <https://github.com/github/fetch/issues/235>\n* <https://github.com/facebook/react-native/issues/4376>\n* <https://github.com/visionmedia/superagent/issues/636>\n* <https://github.com/facebook/react-native/issues/863>\n* <https://github.com/facebook/react-native/issues/370>\n* <https://github.com/facebook/react-native/issues/10>\n\nI know that solutions like `superagent` exist, but they don't seem to work well with React Native (which was my use case for this package).\n\nIn addition, the authors of the spec for ES6's fetch support throwing errors instead of catching them and bubbling them up to the callback/promise.\n\nTherefore I created `fetch-api` to serve as my API glue, and hopefully it'll serve as yours too.\n\n\n## Contributors\n\n* Nick Baugh <niftylettuce@gmail.com>\n\n## Credits\n\n* <https://gist.github.com/anthonator/0dc0310a931398490fab>\n\n## License\n\n[MIT][license-url]\n\n\n[facebook-recommends]: https://facebook.github.io/react-native/docs/network.html\n[blog-article]: http://niftylettuce.com/posts/nodejs-auth-google-facebook-ios-android-eskimo/\n[license-image]: http://img.shields.io/badge/license-MIT-blue.svg?style=flat\n[license-url]: LICENSE\n[nodejs]: https://nodejs.org\n[react-native]: https://facebook.github.io/react-native\n[superagent]: https://github.com/visionmedia/superagent\n[fetch-network-method]: https://facebook.github.io/react-native/docs/network.html#fetch\n[older-browsers]: http://caniuse.com/#feat=promises\n[npm-image]: http://img.shields.io/npm/v/fetch-api.svg?style=flat\n[npm-url]: https://npmjs.org/package/fetch-api\n[npm-downloads]: http://img.shields.io/npm/dm/fetch-api.svg?style=flat\n[circle-ci-image]: https://circleci.com/gh/niftylettuce/node-react-native-fetch-api.svg?style=svg\n[circle-ci-url]: https://circleci.com/gh/niftylettuce/node-react-native-fetch-api\n","created":"2015-11-26T22:05:09.648Z","modified":"2016-05-15T16:11:10.355Z","lastPublisher":{"name":"niftylettuce","email":"niftylettuce@gmail.com"},"owners":[{"name":"niftylettuce","email":"niftylettuce@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"fetch-api","_nodeVersion":"4.1.2","_npmUser":{"name":"niftylettuce","email":"niftylettuce@gmail.com"},"_npmVersion":"2.14.4","_rev":"1-e793ff06e0409e8100841bca7287287a","_shasum":"717113949e8e6bb72e2996fdf27657b6247c6eff","author":{"name":"Nick Baugh","email":"niftylettuce@gmail.com"},"bugs":{"url":"https://github.com/niftylettuce/node-react-native-fetch-api/issues"},"directories":{},"dist-tags":{"latest":"0.0.2"},"dist":{"shasum":"717113949e8e6bb72e2996fdf27657b6247c6eff","tarball":"http://registry.npmjs.org/fetch-api/-/fetch-api-0.0.2.tgz"},"maintainers":[{"name":"niftylettuce","email":"niftylettuce@gmail.com"}],"readmeFilename":"Readme.md","time":{"modified":"2016-05-15T16:11:10.355Z","created":"2015-11-26T22:05:09.648Z","0.0.1":"2015-11-26T22:05:09.648Z","0.0.2":"2015-11-27T23:15:36.258Z"}}}